import{c as f,j as e,i as o,k as j,h,L as m,C as g,e as b,f as v,B as k,g as y,aS as w,aT as C,n as P,z as S,I as T,r as E,u as z,M as A,o as N,aU as M,Y as L,Z as F}from"./index-BvjW9mvP.js";import{T as p}from"./triangle-alert-CG4a9bpy.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=f("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);function $({subscriptionStatus:s="trial",trialEndsAt:i,subscriptionEndsAt:t,limits:l,compact:u=!1}){const a=new Date,c=i?new Date(i):null,n=t?new Date(t):null,d=c&&a<c,r=s==="active",x=c?Math.max(0,Math.ceil((c.getTime()-a.getTime())/(1e3*60*60*24))):0;return u?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsx("div",{className:"flex items-center space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:"Premium Activo"})]}):d?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 text-blue-400"}),e.jsxs("span",{className:"text-sm",children:["Prueba (",x," día",x!==1?"s":"",")"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-400",children:"Expirado"})]})}),!r&&e.jsx(h,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(m,{href:"/pricing",children:"Actualizar"})})]}):e.jsxs(g,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(b,{children:e.jsxs(v,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"flex items-center",children:r?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Estado Premium"]}):d?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-5 h-5 mr-2 text-blue-400"}),"Período de Prueba"]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-5 h-5 mr-2 text-red-400"}),"Suscripción Expirada"]})}),e.jsx(k,{variant:"outline",className:r?"text-green-400 border-green-400":d?"text-blue-400 border-blue-400":"text-red-400 border-red-400",children:r?"Activo":d?`${x} día${x!==1?"s":""} restante${x!==1?"s":""}`:"Expirado"})]})}),e.jsxs(y,{className:"space-y-4",children:[l&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-300",children:"Límites Actuales:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Menús/semana:"}),e.jsx("span",{className:"font-medium",children:l.maxMenusPerWeek===-1?"Ilimitados":l.maxMenusPerWeek})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Personas:"}),e.jsx("span",{className:"font-medium",children:l.maxServings})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Días:"}),e.jsx("span",{className:"font-medium",children:l.maxDays===7?"Toda la semana":`${l.maxDays} días`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Comidas/día:"}),e.jsx("span",{className:"font-medium",children:l.maxMealsPerDay})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-slate-700",children:r?e.jsxs("div",{className:"text-sm text-slate-300",children:[e.jsx("p",{children:"Tu suscripción premium está activa."}),n&&e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Próxima facturación: ",n.toLocaleDateString("es-ES")]})]}):d?e.jsxs("div",{className:"text-sm text-slate-300",children:[e.jsx("p",{children:"Estás en el período de prueba gratuita."}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Expira el ",c==null?void 0:c.toLocaleDateString("es-ES")," a las ",c==null?void 0:c.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})]})]}):e.jsxs("div",{className:"text-sm text-red-300",children:[e.jsx("p",{children:"Tu período de prueba ha expirado."}),e.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Actualiza a premium para continuar generando menús."})]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[!r&&e.jsx(h,{asChild:!0,className:"flex-1",variant:"default",children:e.jsxs(m,{href:"/pricing",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Actualizar a Premium"]})}),r&&e.jsx(h,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(m,{href:"/account",children:"Gestionar Suscripción"})})]})]})]})}const q=[{id:"classic",name:"Pizarra Clásica",description:"Negro profundo con tiza blanca y verde",colors:{bg:"#0f0f0f",text:"#e8e8e8",accent:"#4a9b8e"}},{id:"modern",name:"Pizarra Moderna",description:"Gris oscuro con tiza azul",colors:{bg:"#1a1a2e",text:"#e0e7ff",accent:"#60a5fa"}},{id:"digital",name:"Pizarra Digital",description:"Terminal verde neón",colors:{bg:"#000000",text:"#00ff00",accent:"#00ff41"}}];function I(){const{theme:s,setTheme:i}=w();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-chalk-white mb-6",children:[e.jsx(G,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-xl font-semibold",children:"Estilo de Pizarra"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:q.map(t=>e.jsxs(g,{className:`
              relative cursor-pointer transition-all duration-300 p-4 border-2
              ${s===t.id?"border-chalk-green bg-blackboard-hover":"border-chalk-light hover:border-chalk bg-blackboard"}
            `,onClick:()=>i(t.id),"data-testid":`theme-option-${t.id}`,children:[s===t.id&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(C,{className:"h-5 w-5 text-chalk-green","data-testid":"theme-selected-indicator"})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-chalk-white mb-1",children:t.name}),e.jsx("p",{className:"text-sm text-chalk opacity-80",children:t.description})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"w-8 h-8 rounded border border-chalk-light",style:{backgroundColor:t.colors.bg},title:"Color de fondo"}),e.jsx("div",{className:"w-8 h-8 rounded border border-chalk-light",style:{backgroundColor:t.colors.text},title:"Color de texto"}),e.jsx("div",{className:"w-8 h-8 rounded border border-chalk-light",style:{backgroundColor:t.colors.accent},title:"Color de acento"})]})]},t.id))}),e.jsx("p",{className:"text-sm text-chalk opacity-70 mt-4",children:"El tema se aplicará inmediatamente y se guardará para tus futuras visitas."})]})}function K(){const{user:s}=P(),{toast:i}=S(),t=T(),[l,u]=E.useState(!1),{data:a,isLoading:c}=z({queryKey:["/api/subscription/status"],enabled:!!s});return A({mutationFn:async()=>(await F("/api/subscription/cancel",{method:"POST"})).json(),onSuccess:()=>{i({title:"Suscripción Cancelada",description:"Tu suscripción ha sido cancelada exitosamente. Mantendrás acceso premium hasta el final del período actual."}),t.invalidateQueries({queryKey:["/api/subscription/status"]})},onError:n=>{i({title:"Error",description:n.message||"No se pudo cancelar la suscripción",variant:"destructive"})}}),c?e.jsx("div",{className:"min-h-screen",children:e.jsxs("section",{className:"seccion",children:[e.jsx("img",{src:"/logo.PNG",alt:"TheCookFlow - Gestión de cuenta y suscripción",className:"logo"}),e.jsx("div",{className:"glass-container max-w-2xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-chalk/20 rounded w-1/3 mx-auto"}),e.jsx("div",{className:"h-32 bg-chalk/20 rounded"}),e.jsx("div",{className:"h-48 bg-chalk/20 rounded"})]})})]})}):(a==null||a.subscriptionStatus,a==null||a.isTrialActive,e.jsx("div",{className:"min-h-screen",children:e.jsxs("section",{className:"seccion",children:[e.jsx("img",{src:"/logo.PNG",alt:"TheCookFlow - Gestión de cuenta y suscripción",className:"logo"}),e.jsx("h1",{className:"text-chalk-white mb-4 text-5xl",children:"Mi Cuenta"}),e.jsx("p",{className:"text-xl text-chalk mb-8 max-w-3xl mx-auto leading-relaxed",children:"Gestiona tu perfil y suscripción premium"}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[e.jsxs("div",{className:"glass-container",children:[e.jsxs("h3",{className:"text-2xl text-chalk-white mb-6 flex items-center gap-2",children:[e.jsx(N,{className:"w-6 h-6 text-chalk-green"}),"Información Personal"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-4 h-4 mr-3 text-chalk-green"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-chalk-white",children:s==null?void 0:s.email}),e.jsx("p",{className:"text-sm text-chalk",children:"Email"})]})]})}),((s==null?void 0:s.firstName)||(s==null?void 0:s.lastName))&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"w-4 h-4 mr-3 text-chalk-green"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-chalk-white",children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-sm text-chalk",children:"Nombre completo"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-3 text-chalk-green"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-chalk-white",children:s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString("es-ES"):"No disponible"}),e.jsx("p",{className:"text-sm text-chalk",children:"Miembro desde"})]})]})]})]}),e.jsx("div",{className:"glass-container",children:e.jsx(I,{})}),e.jsx($,{subscriptionStatus:a==null?void 0:a.subscriptionStatus,trialEndsAt:a==null?void 0:a.trialEndsAt,subscriptionEndsAt:a==null?void 0:a.subscriptionEndsAt,limits:a==null?void 0:a.limits}),e.jsx("div",{className:"text-center",children:e.jsx(m,{href:"/dashboard",children:e.jsx("button",{className:"btn-primary-chalk",children:"Volver al Panel"})})})]})]})}))}export{K as default};
