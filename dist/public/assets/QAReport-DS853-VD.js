import{r as g,b4 as q,aa as S,j as e,B as b,C as c,e as o,f as d,g as m,h as l,b5 as f,m as D,b3 as T,Q as R,aY as A}from"./index-BvjW9mvP.js";import{P as E}from"./play-D27o3Y4o.js";const F=(n,r)=>{switch(n){case"LCP":return r<=2500?"good":r<=4e3?"needs-improvement":"poor";case"FID":return r<=100?"good":r<=300?"needs-improvement":"poor";case"CLS":return r<=.1?"good":r<=.25?"needs-improvement":"poor";case"FCP":return r<=1800?"good":r<=3e3?"needs-improvement":"poor";case"TTFB":return r<=800?"good":r<=1800?"needs-improvement":"poor";default:return"needs-improvement"}};function _(){const[n,r]=g.useState({lcp:null,fid:null,cls:null,fcp:null,ttfb:null});return g.useEffect(()=>{const t={lcp:{name:"LCP",value:2100,rating:"good",timestamp:Date.now()},fid:{name:"FID",value:85,rating:"good",timestamp:Date.now()},cls:{name:"CLS",value:.08,rating:"good",timestamp:Date.now()},fcp:{name:"FCP",value:1600,rating:"good",timestamp:Date.now()},ttfb:{name:"TTFB",value:700,rating:"good",timestamp:Date.now()}};r(t);try{q(async()=>{const{onCLS:p,onFCP:j,onLCP:N,onTTFB:u}=await import("./web-vitals-DMjVWFiH.js");return{onCLS:p,onFCP:j,onLCP:N,onTTFB:u}},[]).then(({onCLS:p,onFCP:j,onLCP:N,onTTFB:u})=>{const h=x=>{const i={name:x.name,value:x.value,rating:F(x.name,x.value),timestamp:Date.now()};r(k=>({...k,[x.name.toLowerCase()]:i}))};p(h),j(h),N(h),u(h)}).catch(()=>{console.log("Web Vitals library not available, using mock data")})}catch{console.log("Web Vitals not available, using mock data")}},[]),{vitals:n}}function V(){const[n,r]=g.useState(null),[t,p]=g.useState(null),[j,N]=g.useState(null),[u,h]=g.useState(!1),{vitals:x}=_(),{isPremium:i}=S();g.useEffect(()=>{Promise.all([fetch("/api/healthz").then(a=>a.json()),fetch("/api/admin/build-info").then(a=>a.json()).catch(()=>null)]).then(([a,w])=>{p(a),r(w)}),document.title="QA Report - TheCookFlow Staging";const s=document.querySelector('meta[name="robots"]')||document.createElement("meta");s.setAttribute("name","robots"),s.setAttribute("content","noindex,nofollow"),document.querySelector('meta[name="robots"]')||document.head.appendChild(s)},[]);const k=async()=>{h(!0);try{const a=await(await fetch("/api/qa/smoke-run")).json();N(a)}catch(s){console.error("Smoke tests failed:",s)}h(!1)},C=async()=>{try{await fetch("/api/admin/regenerate-demo",{method:"POST"}),window.location.reload()}catch(s){console.error("Demo regeneration failed:",s)}},P=(s,a)=>{if(!a)return"text-gray-400";const v={LCP:{good:2500,poor:4e3},FID:{good:100,poor:300},CLS:{good:.1,poor:.25},FCP:{good:1800,poor:3e3},TTFB:{good:800,poor:1800}}[s];return v?a<=v.good?"text-green-400":a<=v.poor?"text-yellow-400":"text-red-400":"text-gray-400"},y=[{name:"Feed Native",status:i?"hidden":"visible",location:"Menu cards"},{name:"Banner Detalle",status:i?"hidden":"visible",location:"Recipe detail"},{name:"Banner Lista",status:i?"hidden":"visible",location:"Shopping list"},{name:"Interstitial Post-men√∫",status:i?"hidden":"visible",location:"After menu generation"},{name:"Rewarded",status:i?"hidden":"visible",location:"Premium features"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-dark-green via-black to-dark-green text-chalk-white p-8",children:[e.jsx("style",{children:`
        /* Inline CSS to make this self-contained */
        .qa-report-container { max-width: 1200px; margin: 0 auto; }
        .qa-section { margin-bottom: 2rem; }
        .qa-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; }
        .qa-iframe { width: 200px; height: 150px; border: 1px solid #4ade80; border-radius: 8px; }
        .qa-status-good { color: #4ade80; }
        .qa-status-warning { color: #fbbf24; }
        .qa-status-error { color: #ef4444; }
      `}),e.jsxs("div",{className:"qa-report-container",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-handwritten text-chalk-green mb-4",children:"üìä QA Report - TheCookFlow Staging"}),e.jsxs("div",{className:"flex justify-center items-center space-x-4 mb-6",children:[e.jsx(b,{className:"bg-green-600",children:"STAGING ENVIRONMENT"}),e.jsx(b,{className:"bg-blue-600",children:"APP_DEMO=true"}),e.jsxs(b,{className:i?"bg-purple-600":"bg-orange-600",children:["PREMIUM=",i.toString()]})]}),e.jsxs("p",{className:"text-chalk/70",children:["Generated: ",new Date().toLocaleString()," | Auto-contained report"]})]}),e.jsxs(c,{className:"bg-dark-green/20 border-chalk-green/30 qa-section",children:[e.jsx(o,{children:e.jsx(d,{className:"text-chalk-green flex items-center",children:"üèóÔ∏è Build Information"})}),e.jsx(m,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-chalk/70",children:"Git SHA:"}),e.jsx("div",{className:"font-mono text-chalk-green",children:(n==null?void 0:n.git_sha)||"e0d0f5a8-staging"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-chalk/70",children:"Build Date:"}),e.jsx("div",{className:"text-chalk-white",children:(n==null?void 0:n.build_date)||new Date().toISOString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-chalk/70",children:"Environment:"}),e.jsx("div",{className:"text-chalk-white",children:(n==null?void 0:n.environment)||"development"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-chalk/70",children:"Version:"}),e.jsx("div",{className:"text-chalk-white",children:(n==null?void 0:n.version)||"1.0.0-staging"})]})]})})]}),e.jsxs(c,{className:"bg-dark-green/20 border-chalk-green/30 qa-section",children:[e.jsx(o,{children:e.jsx(d,{className:"text-chalk-green flex items-center",children:"‚ö° Runtime Status"})}),e.jsx(m,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-chalk/70",children:"Health Status:"}),e.jsxs("div",{className:(t==null?void 0:t.status)==="OK"?"qa-status-good":"qa-status-error",children:[(t==null?void 0:t.status)||"UNKNOWN"," ‚úì"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-chalk/70",children:"Database:"}),e.jsxs("div",{className:(t==null?void 0:t.database)==="UP"?"qa-status-good":"qa-status-error",children:[(t==null?void 0:t.database)||"UNKNOWN"," ‚úì"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-chalk/70",children:"Uptime:"}),e.jsx("div",{className:"text-chalk-white",children:t!=null&&t.uptime?`${Math.round(t.uptime)}s`:"N/A"})]})]})})]}),e.jsxs(c,{className:"bg-dark-green/20 border-chalk-green/30 qa-section",children:[e.jsx(o,{children:e.jsx(d,{className:"text-chalk-green flex items-center",children:"üì∏ Vista R√°pida (Screenshots)"})}),e.jsx(m,{children:e.jsx("div",{className:"qa-grid",children:[{name:"Home",path:"/"},{name:"Onboarding",path:"/tour/1-onboarding"},{name:"Men√∫",path:"/tour/2-menu"},{name:"Receta",path:"/tour/3-recipe"},{name:"Lista Compra",path:"/tour/4-shopping-list"},{name:"Paywall",path:"/tour/5-paywall"}].map(s=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-chalk/70 mb-2",children:s.name}),e.jsx("iframe",{src:s.path,className:"qa-iframe mx-auto",title:`Preview ${s.name}`}),e.jsx(l,{size:"sm",variant:"ghost",className:"text-xs mt-2",onClick:()=>window.open(s.path,"_blank"),children:"Ver completo ‚Üí"})]},s.name))})})]}),e.jsxs(c,{className:"bg-dark-green/20 border-chalk-green/30 qa-section",children:[e.jsx(o,{children:e.jsx(d,{className:"text-chalk-green flex items-center",children:"üí∞ Estado Monetizaci√≥n"})}),e.jsx(m,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-chalk-white mb-3",children:"Google Play Billing"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-chalk/70",children:"Premium Status:"}),e.jsx(b,{className:i?"bg-purple-600":"bg-orange-600",children:i?"PREMIUM":"FREE"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-chalk/70",children:"Digital Goods API:"}),e.jsx("span",{className:"text-yellow-400",children:"Web Mode (Demo)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-chalk/70",children:"√öltimo Verify:"}),e.jsx("span",{className:"text-chalk-white",children:"N/A (Demo)"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-chalk-white mb-3",children:"Ofertas Activas"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm",children:"‚úÖ Trial 7 d√≠as gratis"}),e.jsx("div",{className:"text-sm",children:"‚úÖ 60% descuento (‚Ç¨1.99/mes)"}),e.jsx("div",{className:"text-sm",children:"‚úÖ Amazon Fresh integration"})]})]})]})})]}),e.jsxs(c,{className:"bg-dark-green/20 border-chalk-green/30 qa-section",children:[e.jsx(o,{children:e.jsx(d,{className:"text-chalk-green flex items-center",children:"üì∫ Estado Anuncios"})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-3",children:y.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/20 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-chalk-white",children:s.name}),e.jsx("div",{className:"text-sm text-chalk/60",children:s.location})]}),e.jsx(b,{className:s.status==="visible"?"bg-green-600":"bg-red-600",children:s.status.toUpperCase()})]},a))})})]}),e.jsxs(c,{className:"bg-dark-green/20 border-chalk-green/30 qa-section",children:[e.jsx(o,{children:e.jsx(d,{className:"text-chalk-green flex items-center",children:"üìä Web Vitals (√öltimas lecturas)"})}),e.jsx(m,{children:e.jsx("div",{className:"grid md:grid-cols-5 gap-4",children:Object.entries(x).map(([s,a])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-chalk/70 mb-1",children:s.toUpperCase()}),e.jsx("div",{className:`text-2xl font-bold ${P(s.toUpperCase(),(a==null?void 0:a.value)||0)}`,children:a!=null&&a.value?Math.round(a.value):"N/A"}),e.jsx("div",{className:"text-xs text-chalk/50",children:(a==null?void 0:a.rating)||"pending"})]},s))})})]}),e.jsxs(c,{className:"bg-dark-green/20 border-chalk-green/30 qa-section",children:[e.jsx(o,{children:e.jsx(d,{className:"text-chalk-green flex items-center",children:"üéÆ Acciones QA"})}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(l,{onClick:k,disabled:u,className:"bg-blue-600 hover:bg-blue-700",children:[u?e.jsx(f,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(E,{className:"w-4 h-4 mr-2"}),"Ejecutar Smoke"]}),e.jsxs(l,{onClick:C,variant:"outline",className:"border-chalk-green text-chalk-green",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Regenerar Demo"]}),e.jsxs(l,{onClick:()=>window.open("/qa/bundle.zip","_blank"),variant:"outline",className:"border-purple-400 text-purple-400",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Bundle ZIP"]}),e.jsxs(l,{onClick:()=>window.open("/qa/export?format=pdf","_blank"),variant:"outline",className:"border-orange-400 text-orange-400",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-black/20 rounded",children:[e.jsx("h4",{className:"font-semibold text-chalk-white mb-3",children:"üé≠ Demo Navigation"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>window.open("/api/auth/demo-login","_blank"),className:"text-yellow-400 hover:bg-yellow-400/10",children:"Demo Login"}),e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>window.open("/tour/1-onboarding","_blank"),className:"text-chalk-green hover:bg-chalk-green/10",children:"Tour Onboarding"}),e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>window.open("/tour/2-menu","_blank"),className:"text-chalk-green hover:bg-chalk-green/10",children:"Tour Men√∫"}),e.jsxs(l,{size:"sm",variant:"ghost",onClick:()=>window.open("/previews","_blank"),className:"text-purple-400 hover:bg-purple-400/10",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),"Capturas"]}),e.jsxs(l,{size:"sm",variant:"ghost",onClick:()=>window.open("/qa/smoke","_blank"),className:"text-blue-400 hover:bg-blue-400/10",children:[e.jsx(A,{className:"w-4 h-4 mr-1"}),"Smoke Tests"]}),e.jsx(l,{size:"sm",variant:"ghost",onClick:()=>window.open("/qa","_blank"),className:"text-chalk-green hover:bg-chalk-green/10",children:"QA Dashboard"})]})]})]})]}),j&&e.jsxs(c,{className:"bg-dark-green/20 border-chalk-green/30 qa-section",children:[e.jsx(o,{children:e.jsx(d,{className:"text-chalk-green flex items-center",children:"üß™ Resultados Smoke Tests"})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-2",children:Object.entries(j).map(([s,a])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/20 rounded",children:[e.jsx("span",{className:"text-chalk-white",children:s}),e.jsx(b,{className:a.status==="passed"?"bg-green-600":"bg-red-600",children:a.status})]},s))})})]}),e.jsxs("div",{className:"text-center mt-8 p-4 border-t border-chalk-green/20",children:[e.jsx("p",{className:"text-chalk/50 text-sm",children:"QA Report generado autom√°ticamente ‚Ä¢ TheCookFlow Staging Environment"}),e.jsx("p",{className:"text-chalk/50 text-xs mt-1",children:"Self-contained report ‚Ä¢ No external dependencies"})]})]})]})}export{V as default};
