import{n as M,r as n,M as E,j as e,L as T,q as h,O as g,a7 as A,a8 as L,o as q,a9 as I,Z as R}from"./index-BvjW9mvP.js";import{u as U,P as _}from"./PaywallDialog-CC51cZPZ.js";import{C as j}from"./coffee-DK_boxC5.js";function O(){const{user:m,isAuthenticated:b,isLoading:w}=M(),[c,o]=n.useState([{id:"1",content:"¬°Hola! üë®‚Äçüç≥ Soy SkinChef, tu asistente culinario especializado solo en temas de cocina. Puedo ayudarte con recetas, t√©cnicas culinarias, consejos sobre ingredientes y planificaci√≥n general de men√∫s. Ten en cuenta que no tengo acceso a tus datos personales ni informaci√≥n de la aplicaci√≥n. ¬øEn qu√© tema culinario te puedo ayudar? üç≥‚ú®",sender:"skinchef",timestamp:new Date}]),[N,d]=n.useState(!1),[v]=n.useState(["¬øQu√© puedo cocinar con pollo?","Receta r√°pida para cenar","Men√∫ saludable para la semana","C√≥mo conservar alimentos","T√©cnicas b√°sicas de cocina"]),[i,x]=n.useState(""),u=n.useRef(null),[k,l]=n.useState(!1),{usageCount:y,dailyLimit:S,canUse:f,incrementUsage:p}=U({dailyLimit:3,feature:"chef"}),r=E({mutationFn:async s=>{const a=s.trim().substring(0,500);return await R("/api/skinchef/chat",{method:"POST",body:{message:a}})},onSuccess:s=>{d(!1);const a={id:Date.now().toString()+"_skinchef",content:s.response,sender:"skinchef",timestamp:new Date};o(t=>[...t,a])},onError:s=>{d(!1),console.error("Error en chat con SkinChef:",s);const a={id:Date.now().toString()+"_error",content:"¬°Ups! üòÖ Algo sali√≥ mal en la cocina. Por favor intenta de nuevo.",sender:"skinchef",timestamp:new Date};o(t=>[...t,a])}}),C=()=>{var s;(s=u.current)==null||s.scrollIntoView({behavior:"smooth"})};n.useEffect(()=>{C()},[c]);const D=s=>{if(s.preventDefault(),!i.trim()||r.isPending)return;if(!f){l(!0);return}const a={id:Date.now().toString()+"_user",content:i.trim(),sender:"user",timestamp:new Date};o(t=>[...t,a]),d(!0),p()?(r.mutate(i.trim()),x("")):l(!0)},P=s=>{if(!f){l(!0);return}x(s);const a={id:Date.now().toString()+"_user",content:s,sender:"user",timestamp:new Date};o(t=>[...t,a]),d(!0),p()?r.mutate(s):l(!0)};return w?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-chalk text-xl",children:"Cargando..."})}):b?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsxs("div",{className:"glass-container m-4 mb-0 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-2 right-4 text-4xl",children:"üç≥"}),e.jsx("div",{className:"absolute bottom-2 left-4 text-2xl",children:"üë®‚Äçüç≥"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 text-xl",children:"‚ú®"})]}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-chalk-green to-emerald-500 rounded-full flex items-center justify-center animate-pulse shadow-lg",children:e.jsx(h,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl text-chalk-white flex items-center gap-2",children:["SkinChef",e.jsx(g,{className:"h-5 w-5 text-yellow-400 animate-pulse"})]}),e.jsx("p",{className:"text-chalk text-sm",children:"Tu Asistente Culinario Personal"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-green-400",children:"En l√≠nea"})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-chalk-white font-semibold flex items-center gap-2",children:[m==null?void 0:m.firstName,e.jsx(A,{className:"h-4 w-4 text-red-400"})]}),e.jsx("p",{className:"text-chalk text-sm",children:"Chef en Entrenamiento"}),e.jsx("div",{className:"flex gap-1 mt-1",children:[...Array(3)].map((s,a)=>e.jsx(L,{className:"h-3 w-3 text-yellow-400 fill-current"},a))})]})]})]}),c.length===1&&e.jsxs("div",{className:"p-4 pb-2",children:[e.jsx("p",{className:"text-chalk text-sm mb-3 text-center",children:"üí° Sugerencias r√°pidas:"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:v.map((s,a)=>e.jsx("button",{onClick:()=>P(s),className:"px-3 py-2 bg-chalk-green/20 text-chalk text-xs rounded-full hover:bg-chalk-green/30 transition-all duration-200 transform hover:scale-105 border border-chalk-green/30",disabled:r.isPending,children:s},a))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.map((s,a)=>e.jsxs("div",{className:`flex gap-3 ${s.sender==="user"?"justify-end":"justify-start"} animate-fadeIn`,style:{animationDelay:`${a*.1}s`},children:[s.sender==="skinchef"&&e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-chalk-green to-emerald-500 rounded-full flex items-center justify-center flex-shrink-0 shadow-lg animate-bounce-slow",children:e.jsx(h,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-3 rounded-2xl shadow-lg transform transition-all duration-300 hover:scale-105 ${s.sender==="user"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-br-none":"glass-container rounded-bl-none border border-chalk-green/30"}`,children:[e.jsx("p",{className:`text-sm leading-relaxed ${s.sender==="user"?"text-white":"text-chalk"}`,children:s.content}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:`text-xs ${s.sender==="user"?"text-white/70":"text-chalk/60"}`,children:s.timestamp.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}),s.sender==="skinchef"&&e.jsx(j,{className:"h-3 w-3 text-chalk-green opacity-50"})]})]}),s.sender==="user"&&e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-gray-600 to-gray-800 rounded-full flex items-center justify-center flex-shrink-0 shadow-lg",children:e.jsx(q,{className:"h-4 w-4 text-white"})})]},s.id)),N&&e.jsxs("div",{className:"flex gap-3 justify-start animate-fadeIn",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-chalk-green to-emerald-500 rounded-full flex items-center justify-center flex-shrink-0 animate-pulse shadow-lg",children:e.jsx(h,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"glass-container max-w-xs lg:max-w-md px-4 py-3 rounded-2xl rounded-bl-none border border-chalk-green/30",children:[e.jsx("p",{className:"text-chalk text-sm mb-2",children:"üç≥ SkinChef est√° cocinando una respuesta..."}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-chalk-green rounded-full animate-bounce"}),e.jsx("div",{className:"w-3 h-3 bg-chalk-green rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"w-3 h-3 bg-chalk-green rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})]})]}),e.jsx("div",{ref:u})]}),e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:D,className:"glass-container border border-chalk-green/30 shadow-xl",children:[e.jsxs("div",{className:"flex gap-3 items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:i,onChange:s=>x(s.target.value),placeholder:"üç≥ Solo temas de cocina: recetas, ingredientes, t√©cnicas...",className:"input-chalk rounded-xl border-2 border-chalk-green/20 focus:border-chalk-green/50 transition-all duration-300",disabled:r.isPending})}),e.jsx("button",{type:"submit",disabled:!i.trim()||r.isPending,className:"btn-primary-chalk px-6 py-3 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transform transition-all duration-200 hover:scale-110 active:scale-95 shadow-lg",children:e.jsx(I,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-chalk-green/20",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs text-chalk/60",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"h-3 w-3"}),c.length-1," conversaciones"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"h-3 w-3"}),"Siempre disponible"]})]}),e.jsx("div",{className:"text-xs text-chalk/40",children:"Powered by AI ü§ñ"})]})]})}),e.jsx(_,{open:k,onOpenChange:l,reason:"usage_limit",usageCount:y,maxUsage:S})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"p-16 bg-transparent max-w-2xl mx-auto text-center",children:[e.jsx("h2",{className:"text-5xl text-chalk-white mb-8",children:"Acceso Requerido"}),e.jsx("p",{className:"text-chalk mb-12 text-2xl",children:"Necesitas iniciar sesi√≥n para chatear con SkinChef"}),e.jsx(T,{href:"/login",children:e.jsx("button",{className:"btn-primary-chalk text-2xl px-12 py-6",children:"Iniciar Sesi√≥n"})})]})})}export{O as default};
