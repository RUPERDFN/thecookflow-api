import{c as w,z,r as k,u as B,M as F,j as e,C as j,e as b,f as p,D as L,g as N,v as t,h as l,R,V as f,B as T,Z as y}from"./index-BvjW9mvP.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=w("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);function q(){var d,o,h,x,m,g,v,u;const{toast:C}=z(),[r,A]=k.useState("moderate"),[a,c]=k.useState(60),M={days:[{dayName:"Lunes",meals:[{name:"Salmón a la plancha",ingredients:[{name:"salmón",amount:"400g",category:"Pescado"},{name:"espárragos",amount:"200g",category:"Verduras"}]}]}]},{data:s,isLoading:i,refetch:P}=B({queryKey:["/api/savings/analysis",r,a],queryFn:()=>y("/api/savings/savings",{method:"POST",body:{menuPlan:M,currentBudget:a,savingsLevel:r}}),enabled:!1}),n=F({mutationFn:()=>y("/api/savings/activate-default-savings",{method:"POST",body:{userId:"demo-user",savingsLevel:r}}),onSuccess:()=>{C({title:"Modo Ahorro Activado",description:"Tus próximos menús se optimizarán automáticamente para ahorrar dinero."})}});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-dark-green via-black to-dark-green p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(V,{className:"w-10 h-10 text-chalk-green"}),e.jsx("h1",{className:"text-4xl font-bold text-chalk-white",children:"Modo Ahorro"})]}),e.jsx("p",{className:"text-chalk/70 text-lg",children:"Optimiza tus menús para ahorrar dinero sin perder calidad nutricional"})]}),e.jsxs(j,{className:"glass-container border-chalk-green/30 mb-6",children:[e.jsx(b,{children:e.jsxs(p,{className:"text-chalk-white flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Configuración de Ahorro"]})}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-chalk mb-3 block",children:"Presupuesto semanal actual"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l,{variant:"outline",onClick:()=>c(Math.max(20,a-10)),className:"text-chalk border-chalk-green/30 hover:bg-chalk-green/20",children:"-€10"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-chalk-green",children:["€",a]}),e.jsx("div",{className:"text-chalk/60",children:"por semana"})]}),e.jsx(l,{variant:"outline",onClick:()=>c(a+10),className:"text-chalk border-chalk-green/30 hover:bg-chalk-green/20",children:"+€10"})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-chalk mb-3 block",children:"Nivel de optimización"}),e.jsxs(R,{value:r,onValueChange:S=>A(S),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{value:"moderate",id:"moderate"}),e.jsx(t,{htmlFor:"moderate",className:"text-chalk cursor-pointer",children:"Moderado - Mantener sabores familiares"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{value:"aggressive",id:"aggressive"}),e.jsx(t,{htmlFor:"aggressive",className:"text-chalk cursor-pointer",children:"Agresivo - Máximo ahorro posible"})]})]})]})]}),e.jsx(l,{onClick:()=>P(),disabled:i,className:"w-full bg-chalk-green text-dark-green hover:bg-chalk-green/80",children:i?"Analizando...":"Analizar Potencial de Ahorro"})]})]}),s&&e.jsxs(j,{className:"glass-container border-chalk-green/30 mb-6",children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{className:"text-chalk-white",children:"Resumen de Ahorros"}),e.jsx(T,{className:"bg-chalk-green text-dark-green text-lg px-4 py-2",children:((d=s.badge)==null?void 0:d.text)||"-€15.20"})]})}),e.jsxs(N,{children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-black/20 rounded-lg border border-chalk-green/20",children:[e.jsxs("div",{className:"text-2xl font-bold text-chalk-green",children:["€",((o=s.analysis)==null?void 0:o.originalCost)||a]}),e.jsx("div",{className:"text-chalk/60",children:"Coste actual"})]}),e.jsxs("div",{className:"text-center p-4 bg-black/20 rounded-lg border border-chalk-green/20",children:[e.jsxs("div",{className:"text-2xl font-bold text-chalk-green",children:["€",((x=(h=s.analysis)==null?void 0:h.optimizedCost)==null?void 0:x.toFixed(2))||"44.80"]}),e.jsx("div",{className:"text-chalk/60",children:"Coste optimizado"})]}),e.jsxs("div",{className:"text-center p-4 bg-black/20 rounded-lg border border-chalk-green/20",children:[e.jsxs("div",{className:"text-2xl font-bold text-chalk-green",children:[((g=(m=s.analysis)==null?void 0:m.savingsPercentage)==null?void 0:g.toFixed(1))||"25.3","%"]}),e.jsx("div",{className:"text-chalk/60",children:"Ahorro semanal"})]}),e.jsxs("div",{className:"text-center p-4 bg-black/20 rounded-lg border border-chalk-green/20",children:[e.jsxs("div",{className:"text-2xl font-bold text-chalk-green",children:["€",((u=(v=s.analysis)==null?void 0:v.annualSavings)==null?void 0:u.toFixed(0))||"790"]}),e.jsx("div",{className:"text-chalk/60",children:"Ahorro anual"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(l,{onClick:()=>n.mutate(),disabled:n.isPending,className:"bg-chalk-green text-dark-green hover:bg-chalk-green/80 px-8 py-6 text-lg",children:n.isPending?"Activando...":"Activar Ahorro por Defecto"})})]})]})]})})}export{q as default};
